
var sectordata = {
    "bank" : [
        "ICBIBANK",
        "FIRSTSBANK",
        "UTTARABANK",
        "NBL",
        "STANDBANKL",
        "EXIMBANK",
        "JAMUNABANK",
        "PREMIERBAN",
        "CITYBANK",
        "NCCBANK",
        "DHAKABANK",
        "MERCANBANK",
        "UCB",
        "EBL",
        "PUBALIBANK",
        "SIBL",
        "ONEBANKLTD",
        "DUTCHBANGL",
        "SOUTHEASTB",
        "ISLAMIBANK",
        "ALARABANK",
        "SHAHJABANK",
        "TRUSTBANK",
        "BANKASIA",
        "PRIMEBANK",
        "NRBCBANK",
        "BRACBANK",
        "MTB",
        "IFIC",
        "RUPALIBANK",
        "ABBANK"
    ] ,
    "cement" : [
        "ARAMITCEM",
        "CONFIDCEM",
        "HEIDELBCEM",
        "LHBL",
        "MEGHNACEM",
        "MICEMENT",
        "PREMIERCE"
    ] ,
    "ceramic" : [
        "FUWANGCER",
        "MONNOCERA",
        "RAKCERAMIC",
        "SPCERAMICS",
        "STANCERA"
    ] ,
    "engr" : [
        "AFTABAUTO",
        "ANWARGALV",
        "APOLOISPAT",
        "ATLASBANG",
        "AZIZPIPES",
        "BBS",
        "BBSCABLES",
        "BDAUTOCA",
        "BDLAMPS",
        "BDTHAI",
        "BENGALWTL",
        "BSRMLTD",
        "BSRMSTEEL",
        "COPPERTECH",
        "DESHBANDHU",
        "DOMINAGE",
        "ECABLES",
        "GOLDENSON",
        "GPHISPAT",
        "IFADAUTOS",
        "KAY&QUE",
        "KDSALTD",
        "MIRAKHTER",
        "MONNOAGML",
        "NAHEEACP",
        "NAVANACNG",
        "NPOLYMAR",
        "NTLTUBES",
        "OAL",
        "OIMEX",
        "QUASEMIND",
        "RANFOUNDRY",
        "RENWICKJA",
        "RSRMSTEEL",
        "RUNNERAUTO",
        "SALAMCRST",
        "SHURWID",
        "SINGERBD",
        "SSSTEEL",
        "WALTONHIL",
        "WMSHIPYARD",
        "YP"
    ] ,
    "fin" : [
        "BAYLEASING",
        "BDFINANCE",
        "BIFC",
        "DBH",
        "FAREASTFIN",
        "FASFIN",
        "FIRSTFIN",
        "GSPFINANCE",
        "ICB",
        "IDLC",
        "ILFSL",
        "IPDC",
        "ISLAMICFIN",
        "LANKABAFIN",
        "MIDASFIN",
        "NHFIL",
        "PHOENIXFIN",
        "PLFSL",
        "PREMIERLEA",
        "PRIMEFIN",
        "UNIONCAP",
        "UNITEDFIN",
        "UTTARAFI"
    ] ,
    "food" : [
        "AMCL(PRAN)",
        "APEXFOODS",
        "BANGAS",
        "BATBC",
        "BEACHHATCH",
        "EMERALDOIL",
        "FINEFOODS",
        "FUWANGFOOD",
        "GEMINISEA",
        "GHAIL",
        "MEGCONMILK",
        "MEGHNAPET",
        "NTC",
        "OLYMPIC",
        "RAHIMAFOOD",
        "RDFOOD",
        "SHYAMPSUG",
        "TAUFIKA",
        "UNILEVERCL",
        "ZEALBANGL"
    ] ,
    "power" : [
        "AOL",
        "BARKAPOWER",
        "BDWELDING",
        "CVOPRL",
        "DESCO",
        "DOREENPWR",
        "EASTRNLUB",
        "EPGL",
        "GBBPOWER",
        "INTRACO",
        "JAMUNAOIL",
        "KPCL",
        "LINDEBD",
        "LRBDL",
        "MJLBD",
        "MPETROLEUM",
        "PADMAOIL",
        "POWERGRID",
        "SPCL",
        "SUMITPOWER",
        "TITASGAS",
        "UPGDC"
    ] ,
    "ins" : [
        "AGRANINS",
        "ASIAINS",
        "ASIAPACINS",
        "BGIC",
        "BNICL",
        "CENTRALINS",
        "CITYGENINS",
        "CONTININS",
        "CRYSTALINS",
        "DGIC",
        "DHAKAINS",
        "EASTERNINS",
        "EASTLAND",
        "EIL",
        "FEDERALINS",
        "GLOBALINS",
        "GREENDELT",
        "ISLAMIINS",
        "JANATAINS",
        "KARNAPHULI",
        "MERCINS",
        "NITOLINS",
        "NORTHRNINS",
        "PARAMOUNT",
        "PEOPLESINS",
        "PHENIXINS",
        "PIONEERINS",
        "PRAGATIINS",
        "PRIMEINSUR",
        "PROVATIINS",
        "PURABIGEN",
        "RELIANCINS",
        "REPUBLIC",
        "RUPALIINS",
        "SONARBAINS",
        "STANDARINS",
        "TAKAFULINS",
        "UNITEDIN",
        "FAREASTLIF",
        "MEGHNALIFE",
        "NATLIFEINS",
        "PADMALIFE",
        "POPULARLIF",
        "PRAGATILIF",
        "PRIMELIFE",
        "PROGRESLIF",
        "RUPALILIFE",
        "SANDHANINS",
        "SONALILIFE",
        "SUNLIFEIN"
    ] ,
    "it" : [
        "AAMRANET",
        "AAMRATECH",
        "ADNTEL",
        "AGNISYSL",
        "BDCOM",
        "DAFODILCOM",
        "EGEN",
        "GENEXIL",
        "INTECH",
        "ISNLTD",
        "IT"
    ] ,
    "jute" : [
        "JUTESPINN",	
        "NORTHERN",
        "SONALIANSH"
    ] ,
    "mf" : [
        "1JANATAMF",
        "1STPRIMFMF",
        "ABB1STMF",
        "AIBL1STIMF",
        "ATCSLGF",
        "CAPMBDBLMF",
        "CAPMIBBLMF",
        "DBH1STMF",
        "EBL1STMF",
        "EBLNRBMF",
        "EXIM1STMF",
        "FBFIF",
        "GRAMEENS2",
        "GREENDELMF",
        "ICB3RDNRB",
        "ICBAGRANI1",
        "ICBAMCL2ND",
        "ICBEPMF1S1",
        "ICBSONALI1",
        "IFIC1STMF",
        "IFILISLMF1",
        "LRGLOBMF1",
        "MBL1STMF",
        "NCCBLMF1",
        "NLI1STMF",
        "PF1STMF",
        "PHPMF1",
        "POPULAR1MF",
        "PRIME1ICBA",
        "RELIANCE1",
        "SEBL1STMF",
        "SEMLFBSLGF",
        "SEMLIBBLSF",
        "SEMLLECMF",
        "TRUSTB1MF",
        "VAMLBDMF1",
        "VAMLRBB"
    ] ,
    "paper" : [
        "MONOSPOOL",	
        "PAPERPROC",
        "BPML",	
        "HAKKANIPUL",
        "KPPL",
        "SONALIPAPR"
    ] ,
    "pharma" : [
        "ACI",
        "ACIFORMULA",
        "ACMELAB",
        "ACTIVEFINE",
        "ADVENT",
        "AFCAGRO",
        "AMBEEPHA",
        "BEACONPHAR",
        "BXPHARMA",
        "BXSYNTH",
        "CENTRALPHL",
        "FARCHEM",
        "GHCL",
        "IBNSINA",
        "IBP",
        "IMAMBUTTON",
        "JMISMDL",
        "KEYACOSMET",
        "KOHINOOR",
        "LIBRAINFU",
        "MARICO",
        "ORIONINFU",
        "ORIONPHARM",
        "PHARMAID",
        "RECKITTBEN",
        "RENATA",
        "SALVOCHEM",
        "SILCOPHL",
        "SILVAPHL",
        "SQURPHARMA",
        "WATACHE"
    ] ,
    "service" : [
        "EHL",
        "SAIFPOWER",
        "SAMORITA",
        "SAPORT"
    ] ,
    "tannery" : [
        "APEXFOOT",
        "APEXTANRY",
        "BATASHOE",
        "FORTUNE",
        "LEGACYFOOT",
        "SAMATALET"
    ] ,
    "tex" : [
        "ACFL",
        "AIL",
        "AL-HAJTEX",
        "ALIF",
        "ALLTEX",
        "ANLIMAYARN",
        "APEXSPINN",
        "ARGONDENIM",
        "CNATEX",
        "DACCADYE",
        "DELTASPINN",
        "DSHGARME",
        "DSSL",
        "DULAMIACOT",
        "ENVOYTEX",
        "ESQUIRENIT",
        "ETL",
        "FAMILYTEX",
        "FEKDIL",
        "GENNEXT",
        "HFL",
        "HRTEX",
        "HWAWELLTEX",
        "KTL",
        "MAKSONSPIN",
        "MALEKSPIN",
        "MATINSPINN",
        "METROSPIN",
        "MHSML",
        "MITHUNKNIT",
        "MLDYEING",
        "MONNOFABR",
        "NEWLINE",
        "NURANI",
        "PDL",
        "PRIMETEX",
        "PTL",
        "QUEENSOUTH",
        "RAHIMTEXT",
        "REGENTTEX",
        "RINGSHINE",
        "RNSPIN",
        "SAFKOSPINN",
        "SAIHAMCOT",
        "SAIHAMTEX",
        "SHASHADNIM",
        "SHEPHERD",
        "SIMTEX",
        "SKTRIMS",
        "SONARGAON",
        "SQUARETEXT",
        "STYLECRAFT",
        "TALLUSPIN",
        "TAMIJTEX",
        "TOSRIFA",
        "TUNGHAI",
        "VFSTDL",
        "ZAHEENSPIN",
        "ZAHINTE"
    ] ,
    "telecom" : [
        "BSCCL",
        "GP",
        "ROBI"
    ],
    "travel" : [
        "PENINSULA",
        "SEAPEARL",
        "UNIQUEHRL",
        "UNITEDAI"
    ] ,
    "others" : [
        "AMANFEED",
        "ARAMIT",
        "BERGERPBL",
        "BEXIMCO",
        "BSC",
        "GQBALLPEN",
        "INDEXAGRO",
        "KBPPWBIL",
        "MIRACLEIND",
        "NFML",
        "SAVAREFR",
        "SINOBANGLA",
        "USMANIAG"
    ] 
}


const secwise = (sector) => {
    console.log('sector');
    var row = document.getElementsByClassName("name");
    var arr = sectordata[sector] ;
    for(var i of row) {
        var stonk = i.children[0].innerHTML.toUpperCase()
        if (arr.includes(stonk)){
            i.parentElement.style.display = "" ;
            i.parentElement.querySelector('.chart').__chartist__.update();
        } else {
            i.parentElement.style.display ="none" ;
        }
    }
}


const sectordisplay = (show) => {
    var secwise = document.getElementsByClassName('sectrwise');
        secwise[0].style.display = show ;
        secwise[1].style.display = show ;
        secwise[2].style.display = show ;
}


const showstarrred = async () =>{
    var row = document.getElementsByClassName("name");
    var arr = JSON.parse(localStorage.fav);
for(var i of row){
    var stonk = i.children[0].innerHTML.toUpperCase()
    if (arr.includes(stonk)){
        i.parentElement.style.display = "" ;
        i.parentElement.querySelector('.chart').__chartist__.update();
    } else {
        i.parentElement.style.display ="none" ;
    }
  }
  return '1'
}

const starred = async (event) => {
    var active0 = document.getElementsByClassName('active0')[0];
    active0.classList.remove('active0');
    sectordisplay('none')
    event.target.classList.add('active0');
    await showstarrred();
}



const allstockshow = async () =>{
    var row = document.querySelectorAll(".flex");
        for(var i = 0 ; i<=row.length/6 ; i=i+1){
            row[i].style.display = "" ;
            row[i].querySelector('.chart').__chartist__.update();
        }
        console.log('Kolla life')
        return '1'
}

const allstock = async (event) =>{
    var active0 = document.getElementsByClassName('active0')[0] ;
    active0.classList.remove('active0');
    document.getElementById('allstock').classList.add('active0')
    // event.target.classList.add('active0');
    // document.getElementById('stocklist').style.display = ""
    sectordisplay('none');
    await allstockshow()
}

const secclick=(event) => {
        var active0 = document.getElementsByClassName('active0')[0] ;
        active0.classList.remove('active0');
        event.target.classList.add('active0');
        sectordisplay('flex');
    // const sector = document.getElementById('sector');
    // sector.style.display = ""
    // sector.innerHTML = "insurance will pump up"
  //  document.getElementById('stocklist').style.display = "none"
    //     var row = document.getElementsByClassName("name");

    // for(var i of row){
    //         i.parentElement.style.display = "none" ;
    //     }  
    }

const fav = (id) => {
    var fav0 =  document.getElementById(`fav${id}`)
    var favstock = localStorage.fav ? JSON.parse(localStorage.fav) : [];
    if( fav0.classList.contains('checked')) {
        var index = favstock.indexOf(id);
        favstock.splice(index, 1);
        fav0.classList.remove('checked');
    } else {
        fav0.classList.add('checked');
        var favstock = localStorage.fav ? JSON.parse(localStorage.fav) : [];
        favstock.push(id) ;
    }
    localStorage.fav = JSON.stringify(favstock);
}

const showLoading = () =>{
    console.log('Loading started')
    document.getElementById('loading-overlay').classList.add('active');
    new Chartist.Line('.ct-chart', {
        labels: [1, 2, 3, 4, 5, 6, 7, 8],
        series: [
          [11, 12, 15, 11, 12, 8, 17, 16],        //Red
          [14, 15, 13, 15, 18, 17, 19, 17],           // pitch 
          [5, 8, 12, 6, 15, 18, 20, 19],            // yellow
      ]}, 
      {
      //   high: 90,
      //   low: 30,
        showPoint:false,
        showArea : true,
        fullWidth: true,
        axisX:{  
              showGrid : false ,
              showLabel : false , 
              offset : 15,
          } ,
        axisY: {
          onlyInteger: true,
          showGrid : false ,
          showLabel : false , 
          offset: 20
        }
      });
}
showLoading();


const toggler = document.querySelector('.menu__toggler');
const menu    = document.querySelector('.menu');
toggler.addEventListener('click', () => {
    toggler.classList.toggle('active');
    menu.classList.toggle('active');
})


document.querySelector('.fa-sort-amount-up').addEventListener('click',()=>{
    var sorting = document.querySelector('.sorting')
    if(sorting.style.display=="flex"){
        sorting.style.display = "none"
    }else{
        sorting.style.display="flex"
    }
})

